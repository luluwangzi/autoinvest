# 📊 美股期权分析策略平台

基于Streamlit的美股期权分析策略平台，专门用于分析和推荐**Sell Put期权策略**，帮助投资者找到高收益、低风险的期权交易机会。

## 🎯 项目核心功能

这是一个专业的期权分析工具，结合了金融理论、数据科学和用户体验设计，为期权交易者提供了强大的分析能力。

### 🔧 技术架构
- **前端**: Streamlit Web应用
- **数据源**: Yahoo Finance (yfinance)
- **核心算法**: Black-Scholes期权定价模型
- **部署**: Streamlit Cloud自动部署

## 🚀 主要功能模块

### 1. **主页 - 单股票期权分析**
- 输入股票代码（如AAPL、TSLA等）
- 实时获取期权链数据
- 计算年化收益率、被指派概率、Delta等关键指标
- 基于收益优先策略推荐最优期权

### 2. **强烈推荐页面 - 批量分析**
- 自动分析纳斯达克100成分股
- 批量筛选高质量期权机会
- 显示交易时段状态
- 支持自定义DTE范围和股票数量

### 3. **Sell Call页面**
- 分析看涨期权卖出策略
- 基于持仓成本计算年化收益率
- 适用于已有股票持仓的投资者

## 📋 核心筛选策略

### **Sell Put策略筛选条件**:
1. **年化收益率 > 15%** (主页) / **> 25%** (强烈推荐)
2. **被指派概率 < 40%** (风险控制)
3. **成交量 > 50** (流动性保证)
4. **行权价 < 当前股价** (价外期权)
5. **DTE范围**: 1-45天 (短期策略)

### **Sell Call策略筛选条件**:
1. **年化收益率 > 15%** (严格) / **> 10%** (宽松)
2. **被指派概率 < 30%** (严格) / **< 40%** (宽松)
3. **成交量 > 50** (严格) / **> 20** (宽松)

## 🧮 核心计算逻辑

### **年化收益率计算**:
```
年化收益率 = (期权价格 / 行权价) × (365 / DTE)
```

### **被指派概率计算**:
使用Black-Scholes模型的N(-d2)公式：
```
d2 = [ln(S/K) + (r - σ²/2) × T] / (σ × √T)
被指派概率 = N(-d2)
```

### **Delta计算**:
```
Delta = -N(d1) (对于Put期权)
d1 = [ln(S/K) + (r + σ²/2) × T] / (σ × √T)
```

## 🛠️ 安装和运行

### 环境要求
- Python 3.9+
- 网络连接（用于获取Yahoo Finance数据）

### 安装步骤

1. **克隆项目**
```bash
git clone <repository-url>
cd autoinvest
```

2. **安装依赖**
```bash
pip install -r requirements.txt
```

3. **运行应用**
```bash
streamlit run app.py
```

4. **访问应用**
打开浏览器访问: http://localhost:8501

## 📊 使用示例

### **场景1: 寻找高收益期权**
- 在单股票分析页面输入AAPL
- 找到232.5 PUT，年化收益率114.1%，被指派概率28%
- 适合风险偏好较低的投资者

### **场景2: 批量发现机会**
- 在强烈推荐页面开始批量分析
- 自动筛选符合条件的高质量期权
- 适合专业投资者快速扫描市场

### **场景3: 持仓优化**
- 已有股票持仓，寻找Sell Call机会
- 基于持仓成本计算真实收益率
- 适合长期投资者的收益增强策略

## ⚠️ 重要风险提示

- **高风险投资**: 期权交易存在高风险，可能导致全部本金损失
- **模型局限性**: Black-Scholes模型基于理论假设，实际结果可能不同
- **市场波动**: 市场条件变化可能影响期权价格和风险
- **流动性风险**: 某些期权可能缺乏足够的流动性
- **时间衰减**: 期权价值会随时间衰减，需要及时管理

**免责声明**: 本平台提供的分析结果仅供参考，不构成投资建议。投资者应根据自身情况谨慎决策。

## 🔧 技术特性

### **数据质量保证**:
- **历史数据回退**: 非交易时段使用上一交易日数据
- **IV数据修复**: 当隐含波动率异常时使用历史波动率
- **价格数据验证**: 多重验证确保数据准确性

### **用户体验优化**:
- **实时进度显示**: 批量分析时显示进度条
- **智能推荐**: 多层级筛选条件
- **详细指标展示**: 完整的期权分析数据
- **风险提示**: 内置风险警告

## 📁 项目结构

```
autoinvest/
├── app.py                    # 主应用文件
├── options_calculator.py     # 期权计算模块
├── data_fetcher.py          # 数据获取模块
├── utils.py                 # 工具函数
├── test_app.py              # 测试脚本
├── requirements.txt         # 依赖文件
├── .streamlit/
│   └── config.toml          # Streamlit配置
└── pages/                   # 页面模块
    ├── 1_单股票期权分析.py
    ├── 2_强烈推荐.py
    └── 3_Sell_Call策略.py
```

## 🤝 贡献

欢迎提交Issue和Pull Request来改进这个项目。

## 📄 许可证

本项目采用MIT许可证。

---

**投资有风险，入市需谨慎！**